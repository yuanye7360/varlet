import{p as Q,S as q}from"./index.33faf527.js";import{d as W,a as v,b as l,w as k,o as G,D as Z,Q as _,_ as F,f as R,i as x,P as ee,l as N,H as U,J as X,K as I,m as te,ay as ae,an as oe,ab as ne,j as ie,h as se}from"./elevation.b6664af0.js";import{p as le,u as re,a as ce,c as O,e as D,b as de,d as ue}from"./components.1dfa4f07.js";import{l as H}from"./shared.f6499a12.js";import{a as ve,e as K,h as fe}from"./elements.e9a3cb11.js";import{R as be}from"./index.6f8d2b65.js";function V(e){return["horizontal","vertical"].includes(e)}const me={active:{type:[String,Number],default:0},layoutDirection:{type:String,default:"horizontal",validator:V},itemDirection:{type:String,default:"horizontal",validator:V},fixedBottom:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},disabledColor:{type:String},color:{type:String},indicatorColor:{type:String},indicatorSize:{type:[String,Number]},elevation:{type:Boolean,default:!1},sticky:{type:Boolean,default:!1},safeArea:{type:Boolean,default:!1},offsetTop:le(Q,"offsetTop"),onClick:{type:Function},onChange:{type:Function},"onUpdate:active":{type:Function}},j=Symbol("TABS_BIND_TAB_KEY"),J=Symbol("TABS_COUNT_TAB_KEY");function ye(){const{childProviders:e,bindChildren:o}=re(j),{length:i}=ce(J);return{length:i,tabList:e,bindTabList:o}}const{n:pe,classes:he}=O("tabs"),Ce=W({name:"VarTabs",components:{VarSticky:q},inheritAttrs:!1,props:me,setup(e){const o=v("0px"),i=v("0px"),f=v("0px"),b=v("0px"),n=v(!1),m=v(null),p=l(()=>e.active),z=l(()=>e.activeColor),r=l(()=>e.inactiveColor),S=l(()=>e.disabledColor),$=l(()=>e.itemDirection),{tabList:h,bindTabList:A,length:c}=ye(),g=a=>{var Y;const t=(Y=a.name.value)!=null?Y:a.index.value,{active:y,onChange:T,onClick:M}=e;D(e["onUpdate:active"],t),D(M,t),t!==y&&D(T,t)},w=()=>h.find(({name:a})=>e.active===a.value),B=a=>h.find(({index:t})=>(a!=null?a:e.active)===t.value),E=()=>{if(c.value===0)return;const{active:a}=e;if(oe(a)){const t=a>c.value-1?c.value-1:0;return D(e["onUpdate:active"],t),B(t)}},d=()=>{n.value=h.length>=5},u=({element:a})=>{const t=a.value;e.layoutDirection==="horizontal"?(o.value=`${t==null?void 0:t.offsetWidth}px`,f.value=`${t==null?void 0:t.offsetLeft}px`):(i.value=`${t==null?void 0:t.offsetHeight}px`,b.value=`${t==null?void 0:t.offsetTop}px`)},C=({element:a})=>{if(!n.value)return;const t=m.value,y=a.value;if(e.layoutDirection==="horizontal"){const T=y.offsetLeft+y.offsetWidth/2-t.offsetWidth/2;K(t,{left:T,animation:H})}else{const T=y.offsetTop+y.offsetHeight/2-t.offsetHeight/2;K(t,{top:T,animation:H})}},s=()=>{const a=w()||B()||E();!a||a.disabled.value||(d(),u(a),C(a))};return A({active:p,activeColor:z,inactiveColor:r,disabledColor:S,itemDirection:$,resize:s,onTabClick:g}),k(()=>c.value,async()=>{await fe(),s()}),k(()=>e.active,s),G(()=>window.addEventListener("resize",s)),Z(()=>window.removeEventListener("resize",s)),{indicatorWidth:o,indicatorHeight:i,indicatorX:f,indicatorY:b,scrollable:n,scrollerEl:m,Transition:_,toSizeUnit:ve,n:pe,classes:he,resize:s}}});function Te(e,o,i,f,b,n){return R(),x(ae(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.offsetTop:null},{default:ee(()=>[N("div",te({class:e.classes(e.n(),"var--box",e.n(`--item-${e.itemDirection}`),e.n(`--layout-${e.layoutDirection}-padding`),[e.elevation,"var-elevation--4"],[e.fixedBottom,e.n("--fixed-bottom")],[e.safeArea,e.n("--safe-area")]),style:{background:e.color}},e.$attrs),[N("div",{ref:"scrollerEl",class:U(e.classes(e.n("tab-wrap"),[e.scrollable,e.n(`--layout-${e.layoutDirection}-scrollable`)],e.n(`--layout-${e.layoutDirection}`)))},[X(e.$slots,"default"),N("div",{class:U(e.classes(e.n("indicator"),e.n(`--layout-${e.layoutDirection}-indicator`))),style:I({width:e.layoutDirection==="horizontal"?e.indicatorWidth:e.toSizeUnit(e.indicatorSize),height:e.layoutDirection==="horizontal"?e.toSizeUnit(e.indicatorSize):e.indicatorHeight,transform:e.layoutDirection==="horizontal"?`translateX(${e.indicatorX})`:`translateY(${e.indicatorY})`,background:e.indicatorColor||e.activeColor})},null,6)],2)],16)]),_:3},8,["offset-top"])}var P=F(Ce,[["render",Te]]);P.install=function(e){e.component(P.name,P)};const Se={name:{type:[String,Number]},disabled:{type:Boolean,default:!1},onClick:{type:Function}};function $e(){const{parentProvider:e,bindParent:o}=de(j),{index:i}=ue(J);if(!e||!o||!i)throw Error("<var-tab/> must in <var-tabs/>");return{index:i,tabs:e,bindTabs:o}}const{n:ge,classes:Be}=O("tab"),De=W({name:"VarTab",directives:{Ripple:be},props:Se,setup(e){const o=v(null),i=l(()=>e.name),f=l(()=>e.disabled),b=l(()=>o.value),{index:n,tabs:m,bindTabs:p}=$e(),{onTabClick:z,active:r,activeColor:S,inactiveColor:$,disabledColor:h,itemDirection:A,resize:c}=m,g={name:i,index:n,disabled:f,element:b};p(g);const w=()=>{const{disabled:d,name:u}=e;return d?h.value:r.value===u||r.value===(n==null?void 0:n.value)?S.value:$.value},B=()=>{const{disabled:d,name:u}=e;return d?"var-tab--disabled":r.value===u||r.value===(n==null?void 0:n.value)?"var-tab--active":"var-tab--inactive"},E=d=>{const{disabled:u,name:C,onClick:s}=e;u||(s==null||s(C!=null?C:n.value,d),z(g))};return k(()=>e.name,c),k(()=>e.disabled,c),{n:ge,classes:Be,tabEl:o,active:r,activeColor:S,inactiveColor:$,itemDirection:A,computeColorStyle:w,computeColorClass:B,handleClick:E}}});function ke(e,o,i,f,b,n){const m=ne("ripple");return ie((R(),se("div",{class:U(e.classes(e.n(),"var--box",e.computeColorClass(),e.n(`--${e.itemDirection}`))),ref:"tabEl",style:I({color:e.computeColorStyle()}),onClick:o[0]||(o[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[X(e.$slots,"default")],6)),[[m,{disabled:e.disabled}]])}var L=F(De,[["render",ke]]);L.install=function(e){e.component(L.name,L)};export{P as T,L as a};
