import{d as L,a as o,b as O,w as c,o as E,D as F,t as i,T as M,Q as N,j as U,v as j,U as $,n as A}from"./elevation.b6664af0.js";import{g as w,b as I,a as g}from"./elements.e9a3cb11.js";import{u as V}from"./zIndex.b5e81158.js";import{f as D,h as X,e as a,c as Y}from"./components.1dfa4f07.js";/* empty css               */function _(e){return["top","bottom"].includes(e)}const B={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:_},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function H(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!$(e)}const{n:r,classes:P}=Y("menu");var d=L({name:"VarMenu",props:B,setup(e,{slots:f}){const l=o(null),m=o(null),s=o(),v=o(0),p=o(0),{zIndex:b}=V(()=>e.show,1),{disabled:S}=D();let u=!1;const C=t=>t==="top"?w(l.value):w(l.value)-m.value.offsetHeight,x=()=>{u=!0},y=()=>{if(u){u=!1;return}!e.show||a(e["onUpdate:show"],!1)},n=()=>{v.value=C(e.alignment),p.value=I(l.value)},T=O(()=>({top:`calc(${v.value}px + ${g(e.offsetY)})`,left:`calc(${p.value}px + ${g(e.offsetX)})`,zIndex:b.value})),h=()=>i(N,{name:r(),onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:()=>[U(i("div",{class:P(r("menu"),"var-elevation--3"),ref:m,style:T.value,onClick:t=>{t.stopPropagation()}},[a(f.menu)]),[[j,e.show]])]});return c(()=>e.alignment,n),c(()=>e.show,async t=>{const{onOpen:k,onClose:z}=e;t&&(await A(),n()),t?a(k):a(z)}),c(()=>e.teleport,t=>{s.value=t}),E(()=>{s.value=e.teleport,n(),document.addEventListener("click",y),window.addEventListener("resize",n)}),F(()=>{document.removeEventListener("click",y),window.removeEventListener("resize",n)}),X({resize:n}),()=>{let t;return i("div",{class:r(),ref:l,onClick:x},[a(f.default),s.value?i(M,{to:s.value,disabled:S.value},H(t=h())?t:{default:()=>[t]}):h()])}}});d.install=function(e){e.component(d.name,d)};export{d as M};
