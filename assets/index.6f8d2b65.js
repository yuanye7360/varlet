var E=Object.defineProperty,L=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var f=(e,t,o)=>t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))g.call(t,o)&&f(e,o,t[o]);if(h)for(var o of h(t))F.call(t,o)&&f(e,o,t[o]);return e},y=(e,t)=>L(e,T(t));import{c as R}from"./index.907bdd7e.js";/* empty css               */import{s as $}from"./elements.e9a3cb11.js";import{c as A}from"./components.1dfa4f07.js";const{n:b}=A("ripple"),_=250;function N(e){const{zIndex:t,position:o}=window.getComputedStyle(e);e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden",o==="static"&&(e.style.position="relative"),t==="auto"&&(e.style.zIndex="1")}function C(e,t){const{top:o,left:i}=e.getBoundingClientRect(),{clientWidth:s,clientHeight:n}=e,p=Math.sqrt(s**2+n**2)/2,c=p*2,r=t.touches[0].clientX-i,l=t.touches[0].clientY-o,a=(s-p*2)/2,d=(n-p*2)/2,u=r-p,x=l-p;return{x:u,y:x,centerX:a,centerY:d,size:c}}function w(e){const t=this._ripple;if(t.removeRipple(),t.disabled||t.tasker)return;const o=()=>{t.tasker=null;const{x:i,y:s,centerX:n,centerY:p,size:c}=C(this,e),r=document.createElement("div");r.classList.add(b()),r.style.opacity="0",r.style.transform=`translate(${i}px, ${s}px) scale3d(.3, .3, .3)`,r.style.width=`${c}px`,r.style.height=`${c}px`,t.color&&(r.style.backgroundColor=t.color),r.dataset.createdAt=String(performance.now()),N(this),this.appendChild(r),window.setTimeout(()=>{r.style.transform=`translate(${n}px, ${p}px) scale3d(1, 1, 1)`,r.style.opacity=".25"},20)};t.tasker=window.setTimeout(o,60)}function m(){const e=this._ripple,t=()=>{const o=this.querySelectorAll(`.${b()}`);if(!o.length)return;const i=o[o.length-1],s=_-performance.now()+Number(i.dataset.createdAt);setTimeout(()=>{i.style.opacity="0",setTimeout(()=>{var n;return(n=i.parentNode)==null?void 0:n.removeChild(i)},_)},s)};e.tasker?setTimeout(t,60):t()}function k(){const e=this._ripple;!$()||!e.touchmoveForbid||(e.tasker&&window.clearTimeout(e.tasker),e.tasker=null)}function I(e,t){var o,i,s;e._ripple=y(v({tasker:null},(o=t.value)!=null?o:{}),{touchmoveForbid:(s=(i=t.value)==null?void 0:i.touchmoveForbid)!=null?s:R.touchmoveForbid,removeRipple:m.bind(e)}),e.addEventListener("touchstart",w,{passive:!0}),e.addEventListener("touchmove",k,{passive:!0}),e.addEventListener("dragstart",m,{passive:!0}),document.addEventListener("touchend",e._ripple.removeRipple,{passive:!0}),document.addEventListener("touchcancel",e._ripple.removeRipple,{passive:!0})}function S(e){e.removeEventListener("touchstart",w),e.removeEventListener("touchmove",k),e.removeEventListener("dragstart",m),document.removeEventListener("touchend",e._ripple.removeRipple),document.removeEventListener("touchcancel",e._ripple.removeRipple)}function X(e,t){var s,n,p,c,r,l,a,d,u;const o={touchmoveForbid:(n=(s=t.value)==null?void 0:s.touchmoveForbid)!=null?n:R.touchmoveForbid,color:(p=t.value)==null?void 0:p.color,disabled:(c=t.value)==null?void 0:c.disabled};(o.touchmoveForbid!==((r=e._ripple)==null?void 0:r.touchmoveForbid)||o.color!==((l=e._ripple)==null?void 0:l.color)||o.disabled!==((a=e._ripple)==null?void 0:a.disabled))&&(e._ripple=v({tasker:(d=e._ripple)==null?void 0:d.tasker,removeRipple:(u=e._ripple)==null?void 0:u.removeRipple},o))}const O={mounted:I,unmounted:S,updated:X,install(e){e.directive("ripple",this)}};export{O as R};
